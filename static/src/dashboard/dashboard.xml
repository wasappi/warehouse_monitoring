<templates xml:space="preserve">
<t t-name="warehouse_monitoring.dashboard">
    <Layout className="'o_dashboard h-100 d-flex flex-column'" display="{ controlPanel: {} }">
        <t t-set-slot="layout-buttons">
            <button class="btn btn-outline-secondary" t-on-click="openConfiguration">
                <i class="fa fa-gear"/> Configuration
            </button>
        </t>
        <div class="o_content flex-grow-1 overflow-y-auto o_standard_view pb-5">
            <div class="o_container p-3 p-md-4">

                <div class="mb-3 d-flex align-items-center justify-content-between">
                    <div class="d-flex gap-2">
                        <Dropdown>
                            <button class="btn btn-light border rounded-pill fw-bold sm" type="button">
                                <t t-esc="currentStation.name"/>
                                <i class="fa fa-chevron-down ms-2 small opacity-75"/>
                            </button>
                            <t t-set-slot="content">
                                <DropdownItem onSelected="() => selectStation({ id: null, name: 'All Stations' })">
                                    All Stations
                                </DropdownItem>
                                <t t-foreach="stations.data" t-as="station" t-key="station.id">
                                    <DropdownItem onSelected="() => selectStation(station)">
                                        <t t-esc="station.name"/>
                                    </DropdownItem>
                                </t>
                            </t>
                        </Dropdown>

                        <Dropdown>
                            <button class="btn btn-light border rounded-pill fw-bold sm" type="button">
                                <t t-esc="currentPeriod.label"/>
                                <i class="fa fa-chevron-down ms-2 small opacity-75"/>
                            </button>
                            <t t-set-slot="content">
                                <t t-foreach="periods" t-as="period" t-key="period.days">
                                    <DropdownItem onSelected="() => selectPeriod(period)">
                                        <t t-esc="period.label"/>
                                    </DropdownItem>
                                </t>
                            </t>
                        </Dropdown>
                    </div>
                </div>

                <div class="o_renderer">
                    <div class="row g-2">
                        <div class="col-12 col-lg-6">
                            <div class="row g-2">
                                <t t-foreach="valueItems" t-as="item" t-key="item.id">
                                    <Card className="'col-6'">
                                        <t t-set="itemProps" t-value="item.props ? item.props(statistics.data) : {'data': statistics.data}"/>
                                        <t t-component="item.Component" t-props="itemProps" />
                                    </Card>
                                </t>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <t t-if="mediaItem">
                                <Card className="'col-12'">
                                    <t t-set="itemProps" t-value="mediaItem.props ? mediaItem.props(statistics.data) : {'data': statistics.data}"/>
                                    <t t-component="mediaItem.Component" t-props="itemProps" />
                                </Card>
                            </t>
                        </div>
                    </div>
                    <div class="row g-2 mt-1">
                        <t t-if="graphItem">
                            <Card className="'col-12'">
                                <t t-set="itemProps" t-value="graphItem.props ? graphItem.props(statistics.data) : {'data': statistics.data}"/>
                                <t t-component="graphItem.Component" t-props="itemProps" />
                            </Card>
                        </t>
                    </div>
                </div>

            </div>
        </div>
    </Layout>
</t>


    <t t-name="warehouse_monitoring.viaew_config_dialog">
        <Dialog title="'Dashboard Configuration'" size="'sm'">
            <div class="d-flex flex-column">
                <t t-foreach="state.items" t-as="item" t-key="item.id">
                    <div class="mb-2">
                        <CheckBox 
                            value="item.is_checked" 
                            onChange="(val) => item.is_checked = val">
                            <t t-esc="item.description"/>
                        </CheckBox>
                    </div>
                </t>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="onApply">Apply</button>
                <button class="btn btn-secondary" t-on-click="props.close">Cancel</button>
            </t>
        </Dialog>
    </t>

</templates>